@model ProjectQT.DataModel.Models.Product
@using ProjectQT.DataModel.Models
@{
    ViewBag.Title = "ProductQickView";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<Feedback> listFeedback = ViewBag.listFeedback as List<Feedback>;

}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
<style>


    .starrating > input {
        display: none;
    }
    /* Remove radio buttons */

    .starrating > label:before {
        content: "\f005"; /* Star */
        margin: 1px;
        font-size: 3em;
        font-family: FontAwesome;
        display: inline-block;
    }

    .starrating > label {
        color: #c4cdcc; /* Start color when not clicked */
    }

    .starrating > input:checked ~ label {
        color: #ffca08;
    }
    /* Set yellow color when star checked */

    .starrating > input:hover ~ label {
        color: #ffca08;
    }
    /* Set yellow color when star hover */



    #horizontalTab {
        color: black;
    }

        #horizontalTab nav .nav-item {
            color: black;
        }

            #horizontalTab nav .nav-item:hover {
                background-color: #000;
                color: white;
            }

        #horizontalTab nav .active {
            background-color: #000;
            color: white;
        }

    .checked {
        color: orange;
    }
</style>
<section class="banner-bottom-wthreelayouts py-lg-5 py-3">
    <div class="container">
        <div class="inner-sec-shop pt-lg-4 pt-3">
            <div class="row">
                <div class="col-lg-4 single-right-left ">
                    <div class="grid images_3_of_2">
                        <div class="flexslider1">
                            <ul class="slides">
                                <li data-thumb="images/d2.jpg">
                                    <div class="thumb-image">
                                        <img width="350" height="400" src="@Model.ImageUrl" data-imagezoom="true" class="img-fluid" alt=" ">
                                    </div>
                                </li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 single-right-left simpleCart_shelfItem">
                    @using (Html.BeginForm("AddToCart", "Carts", FormMethod.Post))
                    {
                        <input type="hidden" name="Id" value="@Model.Id" />
                        <h3>@Model.Name</h3>
                        <p>
                            @if (Model.SalePrice != null)
                            {
                                <del class="item_price">$@Model.Price</del>
                                <span>$@Model.SalePrice</span>
                            }
                            else
                            {
                                <span>$@Model.Price</span>
                            }
                        </p>
                        <div class="rating1">
                            @if (Model.Reate <= 1)
                            {
                                <span style="color:orange" class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                            }
                            else if (Model.Reate <= 2)
                            {
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                            }
                            else if (Model.Reate <= 3)
                            {
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                            }
                            else if (Model.Reate <= 4)
                            {
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span class="fa fa-star"></span>
                            }
                            else if (Model.Reate <= 5)
                            {
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                                <span style="color:orange" class="fa fa-star"></span>
                            }
                            else
                            {
                                <a href="#">
                                    There are no reviews yet
                                </a>
                            }
                        </div>
                        <div class="occasional">
                            @foreach (var type in ViewBag.types)
                            {
                                <h5>@type.TypeName</h5>
                                <select style="width: 150px;" class="required-entry product-custom-option" id="select_2" name="attributes">
                                    @foreach (var item in type.Attributes)
                                    {
                                        <option value="@item.Id">@item.Name</option>
                                    }
                                </select>
                            }
                            <div class="clearfix"> </div>
                        </div>
                        <div class="input-content">
                            <label for="qty">Quantity:</label>
                            <input type="text" data-type="number" class="input-text qty" value="1" maxlength="3" id="qty" name="qty">
                        </div>
                        if (Session["User"] != null)
                        {
                            <button style="color:white; background-color:black; font-weight:bold" class=" btn googles-cart pgoogles-cart" title="" type="submit">
                                <span><span>Add to Cart</span></span>
                            </button>
                        }
                        else
                        {
                            <a style="color:white; background-color:black; font-weight:bold" href="~/Account/Login" class=" btn googles-cart pgoogles-cart">
                                Add to Cart
                            </a>
                        }
                    }
                    <ul class="footer-social text-left mt-lg-4 mt-3">
                        <li>Share On : </li>
                        <li class="mx-2">
                            <a href="#">
                                <span class="fab fa-facebook-f"></span>
                            </a>
                        </li>
                        <li class="mx-2">
                            <a href="#">
                                <span class="fab fa-twitter"></span>
                            </a>
                        </li>
                        <li class="mx-2">
                            <a href="#">
                                <span class="fab fa-google-plus-g"></span>
                            </a>
                        </li>
                        <li class="mx-2">
                            <a href="#">
                                <span class="fab fa-linkedin-in"></span>
                            </a>
                        </li>
                        <li class="mx-2">
                            <a href="#">
                                <span class="fas fa-rss"></span>
                            </a>
                        </li>

                    </ul>
                </div>
                <div class="clearfix"> </div>
                <!--/tabs-->
                <div class="responsive_tabs">
                    <div id="horizontalTab">
                        <nav>
                            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                <a class="nav-item nav-link" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Description</a>
                                <a class="nav-item nav-link active" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Reviews</a>
                                <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">Information</a>
                            </div>
                        </nav>
                        <div class="tab-content" id="nav-tabContent">
                            <div class="tab-pane fade " id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                                <div class="single_page resp-tabs-container">
                                    <h6>Lorem ipsum dolor sit amet</h6>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elPellentesque vehicula augue eget nisl ullamcorper, molestie
                                        blandit ipsum auctor. Mauris volutpat augue dolor.Consectetur adipisicing elit, sed do eiusmod tempor incididunt
                                        ut lab ore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco. labore et dolore
                                        magna aliqua.
                                    </p>
                                    <p class="para">
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elPellentesque vehicula augue eget nisl ullamcorper, molestie
                                        blandit ipsum auctor. Mauris volutpat augue dolor.Consectetur adipisicing elit, sed do eiusmod tempor incididunt
                                        ut lab ore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco. labore et dolore
                                        magna aliqua.
                                    </p>
                                </div>
                            </div>
                            <div class="tab-pane fade show active" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                                <div style="min-width:1140px" class="single_page resp-tabs-container">
                                    <div>
                                        @if (listFeedback == null)
                                        {
                                            <span>The product has no reviews</span>
                                        }
                                        else
                                        {
                                            foreach (var item in listFeedback)
                                            {
                                                <div class="bootstrap-tab-text-grid">
                                                    <div class="bootstrap-tab-text-grid-left">
                                                        <img src="~/Content/images/avatar.png" alt=" " class="img-fluid">
                                                    </div>

                                                    <div class="bootstrap-tab-text-grid-right">
                                                        <ul>
                                                            <li><a href="#">@item.Users.Email</a></li>
                                                            <li style="color:#109e22">
                                                                @if (item.existOrder == true)
                                                                {
                                                                    <i class="fa fa-check-circle"> Đã mua sản phẩm</i>
                                                                }
                                                            </li>
                                                        </ul>
                                                        <div class="starrating risingstar d-flex justify-content-center flex-row-reverse">
                                                        
                                                        </div>
                                                        <div class="rating12">
                                                            @if (item.FeedbackStar <= 1)
                                                            {
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                            }
                                                            else if (item.FeedbackStar <= 2)
                                                            {
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>

                                                            }
                                                            else if (item.FeedbackStar <= 3)
                                                            {
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>

                                                            }
                                                            else if (item.FeedbackStar <= 4)
                                                            {
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span class="fa fa-star"></span>
                                                            }
                                                            else if (item.FeedbackStar <= 5)
                                                            {
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                                <span style="color:orange" class="fa fa-star"></span>
                                                            }
                                                            else
                                                            {
                                                                <a href="#">
                                                                    There are no reviews yet
                                                                </a>
                                                            }
                                                        </div>
                                                        <p><b>@item.Title</b></p>
                                                        <p>
                                                            @item.Content
                                                        </p>
                                                        <div style="display:none" id="myDIV">
                                                            <br />
                                                            <h4>Content Reply</h4>
                                                            <form action="CreateFeedback" method="post">
                                                                <textarea style="width:100%" name="Message" required=""></textarea>
                                                                <input style="float:right" class="btn btn-success" type="submit" value="SEND">
                                                            </form>
                                                        </div>
                                                    </div>

                                                    <div class="clearfix"> </div>
                                                </div>

                                            }

                                        }

                                    </div>

                                    <div class="bootstrap-tab-text-grids">
                                        <div class="add-review">
                                            <h3><b>add a review</b></h3>
                                            <br />
                                            <h5><b>Feedback star rating for the product</b></h5>
                                            <hr />
                                            <div class="starrating risingstar d-flex justify-content-center flex-row-reverse">
                                                <input onclick="myFunction('star5')" type="radio" id="star5" name="FeedbackStar" value="5" /><label for="star5" title="5 star"></label>
                                                <input onclick="myFunction('star4')" type="radio" id="star4" name="FeedbackStar" value="4" /><label for="star4" title="4 star"></label>
                                                <input onclick="myFunction('star3')" type="radio" id="star3" name="FeedbackStar" value="3" /><label for="star3" title="3 star"></label>
                                                <input onclick="myFunction('star2')" type="radio" id="star2" name="FeedbackStar" value="2" /><label for="star2" title="2 star"></label>
                                                <input onclick="myFunction('star1')" type="radio" id="star1" name="FeedbackStar" value="1" /><label for="star1" title="1 star"></label>
                                            </div>
                                            <hr />
                                            <h5><b>Feedback</b></h5>
                                            <br />
                                            <h4><b>Title</b></h4>
                                            <textarea id="feedbackTitle" name="Title" style="min-height:45px" required=""></textarea>
                                            <h4><b>Content Feedback</b></h4>
                                            <textarea id="feedbackContent" name="Content" required=""></textarea>
                                            <input id="productId" type="hidden" name="ProductId" value="@Model.Id" />
                                            @if (Session["User"] == null)
                                            {
                                                <a style="color:white; background-color:#ff4e00;width:215px; height: 52px; padding-top:14px; font-weight:bold" href="~/Account/Login" class=" btn googles-cart pgoogles-cart">
                                                    SEND
                                                </a>
                                            }
                                            else
                                            {
                                                <input id="btnSubmit" type="submit" value="SEND">
                                            }
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                                <div class="single_page resp-tabs-container">
                                    <h6>Irayz Butterfly Sunglasses  (Black)</h6>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elPellentesque vehicula augue eget nisl ullamcorper, molestie
                                        blandit ipsum auctor. Mauris volutpat augue dolor.Consectetur adipisicing elit, sed do eiusmod tempor incididunt
                                        ut lab ore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco. labore et dolore
                                        magna aliqua.
                                    </p>
                                    <p class="para">
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elPellentesque vehicula augue eget nisl ullamcorper, molestie
                                        blandit ipsum auctor. Mauris volutpat augue dolor.Consectetur adipisicing elit, sed do eiusmod tempor incididunt
                                        ut lab ore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco. labore et dolore
                                        magna aliqua.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--//tabs-->
            </div>
        </div>
    </div>
</section>

@section scripts
{
    <script>

        var feedbackValue;
        function myFunction(id) {
            feedbackValue = document.getElementById(id).value;

        }

        $('#btnSubmit').on('click',
            function (e) {
                var dateModel = {
                    title: $('#feedbackTitle').val(),
                    content: $('#feedbackContent').val(),
                    feedbackStar: feedbackValue,
                    ProductId: $('#productId').val(),
                };
                SubmitFeedback(dateModel);
            });

        function SubmitFeedback(dateModel) {
            $.ajax({
                url: '/Products/CreateFeedback',
                type: 'POST',
                cache: false,
                async: true,
                dataType: "json",
                data: dateModel
            });
            location.reload();
        }
    </script>

}

